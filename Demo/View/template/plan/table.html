{% extends "../header.html"%}

{% block body_content %}

<div class="container">
    <h2 class="ui dividing header"> 版本计划</h2>
    <div><button id="show_staff">展示版本人员</button><button id="hide_staff">隐藏版本人员</button></div>
    {%for type in types%}
    <a href="{{type.site}}"><span>{{type.name}}</span></a>
    {% endfor %}
    <h2 class="ui dividing header"></h2>
    <div class="table_container">
    <table class="ui celled table">
        <thead>
            <tr>
                <th colspan="2">版本</th>
                {% for date in date_list %}
                <th style="max-width:60px">{{date|date:"m/d"}}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
        {% for version_info in version_infos %}
            <tr>
                <td rowspan="{{version_info.row}}">
                    <a href="{{version_info.site}}" >{{version_info.name}}</a>
                </td>
                <td>计划</td>
                {% for stages in version_info.stage_plan %}
                    <td><span>{{stages}}</span>
                        {% for staff in version_info.assign_staffs %}
                            <span class="staff_name" style="display:none">{{staff}}</span>
                        {% endfor %}
                    </td>
                {% endfor %}
            </tr>
            <tr>
                <td>实际</td>
                {% for stages in version_info.stage_actual %}
                    <td>{{stages}}</td>
                {% endfor %}
            </tr>
        {% endfor %}
        </tbody>
    </table>
    </div>
</div>
<script>
    $('#show_staff').on('click', function() {
        $('span.staff_name').show();
    })
    $('#hide_staff').on('click', function() {
        $('span.staff_name').hide();
    })

</script>
{%endblock%}

